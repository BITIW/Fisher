import{_ as a,a as t,b as e,c as s,i as r,d as n,S as c,s as l,e as o,v as u,g as i,k as f,w as p,h,l as m,n as v,m as d,x as _,f as b,j as E,y,z as g,q as x,A as k,o as I,p as U,B as A,r as w,u as D}from"./client.235d5a19.js";import{_ as V}from"./asyncToGenerator.5229e80b.js";import{R as j,a as N,b as S,c as P,d as T,e as R}from"./auth-constants.6e91b4b3.js";function B(a){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(a){return!1}}();return function(){var r,n=t(a);if(s){var c=t(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return e(this,r)}}function L(a){var t,e;return{c:function(){t=o("div"),e=u(a[3]),this.h()},l:function(s){t=i(s,"DIV",{class:!0});var r=f(t);e=p(r,a[3]),r.forEach(h),this.h()},h:function(){m(t,"class","auth-form__error svelte-14ppame")},m:function(a,s){v(a,t,s),d(t,e)},p:function(a,t){8&t&&_(e,a[3])},d:function(a){a&&h(t)}}}function O(a){var t,e,s,r,n,c,l,_,x,k;return{c:function(){t=o("label"),e=o("img"),r=b(),n=o("span"),c=u("Код с картинки"),l=b(),_=o("input"),this.h()},l:function(a){t=i(a,"LABEL",{class:!0});var s=f(t);e=i(s,"IMG",{src:!0,alt:!0,class:!0}),r=E(s),n=i(s,"SPAN",{class:!0});var o=f(n);c=p(o,"Код с картинки"),o.forEach(h),l=E(s),_=i(s,"INPUT",{type:!0,class:!0,disabled:!0}),s.forEach(h),this.h()},h:function(){e.src!==(s=a[4])&&m(e,"src",s),m(e,"alt","Каптча"),m(e,"class","auth-form__capthca-image svelte-14ppame"),m(n,"class","auth-form__label svelte-14ppame"),m(_,"type","text"),m(_,"class","auth-form__input svelte-14ppame"),_.disabled=a[0],m(t,"class","auth-form__field auth-form__field--captcha svelte-14ppame")},m:function(s,o){v(s,t,o),d(t,e),d(t,r),d(t,n),d(n,c),d(t,l),d(t,_),y(_,a[5]),x||(k=g(_,"input",a[13]),x=!0)},p:function(a,t){16&t&&e.src!==(s=a[4])&&m(e,"src",s),1&t&&(_.disabled=a[0]),32&t&&_.value!==a[5]&&y(_,a[5])},d:function(a){a&&h(t),x=!1,k()}}}function G(a){var t,e,s,r,n,c,l,_,w,D,V,j,N,S,P,T,R,B,G,M,$,q,z,C,F,J,H,K,Q,W,X,Y,Z,aa,ta,ea,sa,ra,na,ca,la,oa,ua,ia,fa,pa,ha,ma=a[3]&&L(a),va=a[4]&&O(a);return{c:function(){t=b(),e=o("div"),s=o("div"),r=o("nav"),n=o("a"),c=u("ВКонтакте"),l=b(),_=o("a"),w=u("Регистрация"),D=b(),V=o("form"),j=o("div"),N=u("Для продолжения Вам необходимо войти\n        "),S=o("b"),P=u("ВКонтакте"),T=b(),R=o("div"),ma&&ma.c(),B=b(),G=o("div"),M=o("label"),$=o("span"),q=u("Телефон или email"),z=b(),C=o("input"),F=b(),J=o("label"),H=o("span"),K=u("Пароль"),Q=b(),W=o("input"),X=b(),va&&va.c(),Y=b(),Z=o("div"),aa=o("button"),ta=u("Войти"),ea=b(),sa=o("a"),ra=u("Забыли пароль?"),na=b(),ca=o("div"),la=o("div"),oa=u("Ещё не зарегистрированы?"),ua=b(),ia=o("a"),fa=u("Зарегистрироваться"),this.h()},l:function(a){x('[data-svelte="svelte-16be1n6"]',document.head).forEach(h),t=E(a),e=i(a,"DIV",{class:!0});var o=f(e);s=i(o,"DIV",{class:!0});var u=f(s);r=i(u,"NAV",{class:!0});var m=f(r);n=i(m,"A",{class:!0,href:!0});var v=f(n);c=p(v,"ВКонтакте"),v.forEach(h),l=E(m),_=i(m,"A",{href:!0,rel:!0,class:!0});var d=f(_);w=p(d,"Регистрация"),d.forEach(h),m.forEach(h),D=E(u),V=i(u,"FORM",{action:!0,class:!0});var b=f(V);j=i(b,"DIV",{class:!0});var y=f(j);N=p(y,"Для продолжения Вам необходимо войти\n        "),S=i(y,"B",{});var g=f(S);P=p(g,"ВКонтакте"),g.forEach(h),y.forEach(h),T=E(b),R=i(b,"DIV",{class:!0});var k=f(R);ma&&ma.l(k),B=E(k),G=i(k,"DIV",{class:!0});var I=f(G);M=i(I,"LABEL",{class:!0});var U=f(M);$=i(U,"SPAN",{class:!0});var A=f($);q=p(A,"Телефон или email"),A.forEach(h),z=E(U),C=i(U,"INPUT",{type:!0,name:!0,autocomplete:!0,class:!0,disabled:!0}),U.forEach(h),F=E(I),J=i(I,"LABEL",{class:!0});var L=f(J);H=i(L,"SPAN",{class:!0});var O=f(H);K=p(O,"Пароль"),O.forEach(h),Q=E(L),W=i(L,"INPUT",{type:!0,name:!0,class:!0,disabled:!0,autocomplete:!0}),L.forEach(h),X=E(I),va&&va.l(I),Y=E(I),Z=i(I,"DIV",{class:!0});var pa=f(Z);aa=i(pa,"BUTTON",{class:!0,type:!0,disabled:!0});var ha=f(aa);ta=p(ha,"Войти"),ha.forEach(h),ea=E(pa),sa=i(pa,"A",{class:!0,href:!0,target:!0,rel:!0});var da=f(sa);ra=p(da,"Забыли пароль?"),da.forEach(h),pa.forEach(h),I.forEach(h),na=E(k),ca=i(k,"DIV",{class:!0});var _a=f(ca);la=i(_a,"DIV",{class:!0});var ba=f(la);oa=p(ba,"Ещё не зарегистрированы?"),ba.forEach(h),ua=E(_a),ia=i(_a,"A",{class:!0,href:!0,target:!0,rel:!0});var Ea=f(ia);fa=p(Ea,"Зарегистрироваться"),Ea.forEach(h),_a.forEach(h),k.forEach(h),b.forEach(h),u.forEach(h),o.forEach(h),this.h()},h:function(){document.title="Вход | ВКонтакте",m(n,"class","auth-form__nav-logo svelte-14ppame"),m(n,"href","/"),m(_,"href","https://vk.com/join?reg=1"),m(_,"rel","external"),m(_,"class","auth-form__nav-register svelte-14ppame"),m(r,"class","auth-form__nav svelte-14ppame"),m(j,"class","auth-form__form-prepend svelte-14ppame"),m($,"class","auth-form__label svelte-14ppame"),m(C,"type","text"),m(C,"name","username"),m(C,"autocomplete","username"),m(C,"class","auth-form__input svelte-14ppame"),C.disabled=a[0],m(M,"class","auth-form__field svelte-14ppame"),m(H,"class","auth-form__label svelte-14ppame"),m(W,"type","password"),m(W,"name","current-password"),m(W,"class","auth-form__input svelte-14ppame"),W.disabled=a[0],m(W,"autocomplete","current-password"),m(J,"class","auth-form__field svelte-14ppame"),m(aa,"class","auth-form__button auth-form__button--primary svelte-14ppame"),m(aa,"type","submit"),aa.disabled=a[0],m(sa,"class","auth-form__button auth-form__button--link\n              auth-form__button--restore svelte-14ppame"),m(sa,"href","https://vk.com/restore"),m(sa,"target","_blank"),m(sa,"rel","external"),m(Z,"class","auth-form__buttons svelte-14ppame"),m(G,"class","auth-form__fields svelte-14ppame"),m(la,"class","auth-form__ny-registed-label svelte-14ppame"),m(ia,"class","auth-form__button auth-form__button--secondary\n            auth-form__button--register svelte-14ppame"),m(ia,"href","https://vk.com/join?reg=1"),m(ia,"target","_blank"),m(ia,"rel","external"),m(ca,"class","auth-form__ny-registed svelte-14ppame"),m(R,"class","auth-form__fields-container svelte-14ppame"),m(V,"action","#"),m(V,"class","auth-form__form svelte-14ppame"),m(s,"class","auth-form svelte-14ppame"),m(e,"class","background svelte-14ppame")},m:function(o,u){v(o,t,u),v(o,e,u),d(e,s),d(s,r),d(r,n),d(n,c),d(r,l),d(r,_),d(_,w),d(s,D),d(s,V),d(V,j),d(j,N),d(j,S),d(S,P),d(V,T),d(V,R),ma&&ma.m(R,null),d(R,B),d(R,G),d(G,M),d(M,$),d($,q),d(M,z),d(M,C),y(C,a[1]),d(G,F),d(G,J),d(J,H),d(H,K),d(J,Q),d(J,W),y(W,a[2]),d(G,X),va&&va.m(G,null),d(G,Y),d(G,Z),d(Z,aa),d(aa,ta),d(Z,ea),d(Z,sa),d(sa,ra),d(R,na),d(R,ca),d(ca,la),d(la,oa),d(ca,ua),d(ca,ia),d(ia,fa),pa||(ha=[g(C,"input",a[9]),g(C,"input",a[10]),g(W,"input",a[11]),g(W,"input",a[12]),g(V,"submit",k(a[6]))],pa=!0)},p:function(a,t){var e=I(t,1)[0];a[3]?ma?ma.p(a,e):((ma=L(a)).c(),ma.m(R,B)):ma&&(ma.d(1),ma=null),1&e&&(C.disabled=a[0]),2&e&&C.value!==a[1]&&y(C,a[1]),1&e&&(W.disabled=a[0]),4&e&&W.value!==a[2]&&y(W,a[2]),a[4]?va?va.p(a,e):((va=O(a)).c(),va.m(G,Y)):va&&(va.d(1),va=null),1&e&&(aa.disabled=a[0])},i:U,o:U,d:function(a){a&&h(t),a&&h(e),ma&&ma.d(),va&&va.d(),pa=!1,A(ha)}}}function M(a,t){return{exitUrl:t.exit,authUrl:t.authUrl}}function $(a,t,e){var s=t.exitUrl,r=t.authUrl,n=!1,c="",l="",o="",u="",i="",f="";function p(){return(p=V(w.mark((function a(){var t;return w.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(0,n=!0),t={username:c,password:l},i&&Object.assign(t,{captcha_sid:i,captcha_key:f}),fetch(r,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(a){return a.json()})).then((function(a){switch(a.status){case R:e(4,u=a.img),i=a.sid;break;case T:e(3,o="Указан неверный логин или пароль.");break;case P:D("/otp");break;case S:window.location.assign(s);break;case N:e(3,o="Слишком много попыток входа. Повторите попытку позднее.");break;case j:default:e(3,o="Произошла неизвестная ошибка")}})).catch((function(a){return e(3,o="Произошла сетевая ошибка")})).then((function(){return e(0,n=!1)}));case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return a.$$set=function(a){"exitUrl"in a&&e(7,s=a.exitUrl),"authUrl"in a&&e(8,r=a.authUrl)},[n,c,l,o,u,f,function(){return p.apply(this,arguments)},s,r,function(){c=this.value,e(1,c)},function(a){return localStorage.setItem("username",a.target.value)},function(){l=this.value,e(2,l)},function(a){return localStorage.setItem("password",a.target.value)},function(){f=this.value,e(5,f)}]}var q=function(t){a(o,c);var e=B(o);function o(a){var t;return s(this,o),t=e.call(this),r(n(t),a,$,G,l,{exitUrl:7,authUrl:8}),t}return o}();export default q;export{M as preload};
