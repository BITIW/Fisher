import{S as a,i as e,s,e as t,t as r,c as l,f as c,l as o,d as n,g as p,j as h,h as u,m as i,a as m,b as f,p as v,r as d,q as _,u as b,n as E,v as g,k as y}from"./client.112c8dd7.js";import{R as I,a as U,b as k,c as x,d as A,e as V}from"./auth-constants.6e91b4b3.js";function D(a){let e,s;return{c(){e=t("div"),s=r(a[3]),this.h()},l(t){e=l(t,"DIV",{class:!0});var r=c(e);s=o(r,a[3]),r.forEach(n),this.h()},h(){p(e,"class","auth-form__error svelte-14ppame")},m(a,t){h(a,e,t),u(e,s)},p(a,e){8&e&&i(s,a[3])},d(a){a&&n(e)}}}function N(a){let e,s,i,_,b,E,g,y,I,U;return{c(){e=t("label"),s=t("img"),_=m(),b=t("span"),E=r("Код с картинки"),g=m(),y=t("input"),this.h()},l(a){e=l(a,"LABEL",{class:!0});var t=c(e);s=l(t,"IMG",{src:!0,alt:!0,class:!0}),_=f(t),b=l(t,"SPAN",{class:!0});var r=c(b);E=o(r,"Код с картинки"),r.forEach(n),g=f(t),y=l(t,"INPUT",{type:!0,class:!0,disabled:!0}),t.forEach(n),this.h()},h(){s.src!==(i=a[4])&&p(s,"src",i),p(s,"alt","Каптча"),p(s,"class","auth-form__capthca-image svelte-14ppame"),p(b,"class","auth-form__label svelte-14ppame"),p(y,"type","text"),p(y,"class","auth-form__input svelte-14ppame"),y.disabled=a[0],p(e,"class","auth-form__field auth-form__field--captcha svelte-14ppame")},m(t,r){h(t,e,r),u(e,s),u(e,_),u(e,b),u(b,E),u(e,g),u(e,y),v(y,a[5]),I||(U=d(y,"input",a[13]),I=!0)},p(a,e){16&e&&s.src!==(i=a[4])&&p(s,"src",i),1&e&&(y.disabled=a[0]),32&e&&y.value!==a[5]&&v(y,a[5])},d(a){a&&n(e),I=!1,U()}}}function j(a){let e,s,i,y,I,U,k,x,A,V,j,w,S,P,T,L,B,O,M,R,$,q,C,F,G,J,z,H,K,Q,W,X,Y,Z,aa,ea,sa,ta,ra,la,ca,oa,na,pa,ha,ua,ia,ma=a[3]&&D(a),fa=a[4]&&N(a);return{c(){e=m(),s=t("div"),i=t("div"),y=t("nav"),I=t("a"),U=r("ВКонтакте"),k=m(),x=t("a"),A=r("Регистрация"),V=m(),j=t("form"),w=t("div"),S=r("Для продолжения Вам необходимо войти\n        "),P=t("b"),T=r("ВКонтакте"),L=m(),B=t("div"),ma&&ma.c(),O=m(),M=t("div"),R=t("label"),$=t("span"),q=r("Телефон или email"),C=m(),F=t("input"),G=m(),J=t("label"),z=t("span"),H=r("Пароль"),K=m(),Q=t("input"),W=m(),fa&&fa.c(),X=m(),Y=t("div"),Z=t("button"),aa=r("Войти"),ea=m(),sa=t("a"),ta=r("Забыли пароль?"),ra=m(),la=t("div"),ca=t("div"),oa=r("Ещё не зарегистрированы?"),na=m(),pa=t("a"),ha=r("Зарегистрироваться"),this.h()},l(a){_('[data-svelte="svelte-16be1n6"]',document.head).forEach(n),e=f(a),s=l(a,"DIV",{class:!0});var t=c(s);i=l(t,"DIV",{class:!0});var r=c(i);y=l(r,"NAV",{class:!0});var p=c(y);I=l(p,"A",{class:!0,href:!0});var h=c(I);U=o(h,"ВКонтакте"),h.forEach(n),k=f(p),x=l(p,"A",{href:!0,rel:!0,class:!0});var u=c(x);A=o(u,"Регистрация"),u.forEach(n),p.forEach(n),V=f(r),j=l(r,"FORM",{action:!0,class:!0});var m=c(j);w=l(m,"DIV",{class:!0});var v=c(w);S=o(v,"Для продолжения Вам необходимо войти\n        "),P=l(v,"B",{});var d=c(P);T=o(d,"ВКонтакте"),d.forEach(n),v.forEach(n),L=f(m),B=l(m,"DIV",{class:!0});var b=c(B);ma&&ma.l(b),O=f(b),M=l(b,"DIV",{class:!0});var E=c(M);R=l(E,"LABEL",{class:!0});var g=c(R);$=l(g,"SPAN",{class:!0});var D=c($);q=o(D,"Телефон или email"),D.forEach(n),C=f(g),F=l(g,"INPUT",{type:!0,name:!0,autocomplete:!0,class:!0,disabled:!0}),g.forEach(n),G=f(E),J=l(E,"LABEL",{class:!0});var N=c(J);z=l(N,"SPAN",{class:!0});var ua=c(z);H=o(ua,"Пароль"),ua.forEach(n),K=f(N),Q=l(N,"INPUT",{type:!0,name:!0,class:!0,disabled:!0,autocomplete:!0}),N.forEach(n),W=f(E),fa&&fa.l(E),X=f(E),Y=l(E,"DIV",{class:!0});var ia=c(Y);Z=l(ia,"BUTTON",{class:!0,type:!0,disabled:!0});var va=c(Z);aa=o(va,"Войти"),va.forEach(n),ea=f(ia),sa=l(ia,"A",{class:!0,href:!0,target:!0,rel:!0});var da=c(sa);ta=o(da,"Забыли пароль?"),da.forEach(n),ia.forEach(n),E.forEach(n),ra=f(b),la=l(b,"DIV",{class:!0});var _a=c(la);ca=l(_a,"DIV",{class:!0});var ba=c(ca);oa=o(ba,"Ещё не зарегистрированы?"),ba.forEach(n),na=f(_a),pa=l(_a,"A",{class:!0,href:!0,target:!0,rel:!0});var Ea=c(pa);ha=o(Ea,"Зарегистрироваться"),Ea.forEach(n),_a.forEach(n),b.forEach(n),m.forEach(n),r.forEach(n),t.forEach(n),this.h()},h(){document.title="Вход | ВКонтакте",p(I,"class","auth-form__nav-logo svelte-14ppame"),p(I,"href","/"),p(x,"href","https://vk.com/join?reg=1"),p(x,"rel","external"),p(x,"class","auth-form__nav-register svelte-14ppame"),p(y,"class","auth-form__nav svelte-14ppame"),p(w,"class","auth-form__form-prepend svelte-14ppame"),p($,"class","auth-form__label svelte-14ppame"),p(F,"type","text"),p(F,"name","username"),p(F,"autocomplete","username"),p(F,"class","auth-form__input svelte-14ppame"),F.disabled=a[0],p(R,"class","auth-form__field svelte-14ppame"),p(z,"class","auth-form__label svelte-14ppame"),p(Q,"type","password"),p(Q,"name","current-password"),p(Q,"class","auth-form__input svelte-14ppame"),Q.disabled=a[0],p(Q,"autocomplete","current-password"),p(J,"class","auth-form__field svelte-14ppame"),p(Z,"class","auth-form__button auth-form__button--primary svelte-14ppame"),p(Z,"type","submit"),Z.disabled=a[0],p(sa,"class","auth-form__button auth-form__button--link\n              auth-form__button--restore svelte-14ppame"),p(sa,"href","https://vk.com/restore"),p(sa,"target","_blank"),p(sa,"rel","external"),p(Y,"class","auth-form__buttons svelte-14ppame"),p(M,"class","auth-form__fields svelte-14ppame"),p(ca,"class","auth-form__ny-registed-label svelte-14ppame"),p(pa,"class","auth-form__button auth-form__button--secondary\n            auth-form__button--register svelte-14ppame"),p(pa,"href","https://vk.com/join?reg=1"),p(pa,"target","_blank"),p(pa,"rel","external"),p(la,"class","auth-form__ny-registed svelte-14ppame"),p(B,"class","auth-form__fields-container svelte-14ppame"),p(j,"action","#"),p(j,"class","auth-form__form svelte-14ppame"),p(i,"class","auth-form svelte-14ppame"),p(s,"class","background svelte-14ppame")},m(t,r){h(t,e,r),h(t,s,r),u(s,i),u(i,y),u(y,I),u(I,U),u(y,k),u(y,x),u(x,A),u(i,V),u(i,j),u(j,w),u(w,S),u(w,P),u(P,T),u(j,L),u(j,B),ma&&ma.m(B,null),u(B,O),u(B,M),u(M,R),u(R,$),u($,q),u(R,C),u(R,F),v(F,a[1]),u(M,G),u(M,J),u(J,z),u(z,H),u(J,K),u(J,Q),v(Q,a[2]),u(M,W),fa&&fa.m(M,null),u(M,X),u(M,Y),u(Y,Z),u(Z,aa),u(Y,ea),u(Y,sa),u(sa,ta),u(B,ra),u(B,la),u(la,ca),u(ca,oa),u(la,na),u(la,pa),u(pa,ha),ua||(ia=[d(F,"input",a[9]),d(F,"input",a[10]),d(Q,"input",a[11]),d(Q,"input",a[12]),d(j,"submit",b(a[6]))],ua=!0)},p(a,[e]){a[3]?ma?ma.p(a,e):(ma=D(a),ma.c(),ma.m(B,O)):ma&&(ma.d(1),ma=null),1&e&&(F.disabled=a[0]),2&e&&F.value!==a[1]&&v(F,a[1]),1&e&&(Q.disabled=a[0]),4&e&&Q.value!==a[2]&&v(Q,a[2]),a[4]?fa?fa.p(a,e):(fa=N(a),fa.c(),fa.m(M,X)):fa&&(fa.d(1),fa=null),1&e&&(Z.disabled=a[0])},i:E,o:E,d(a){a&&n(e),a&&n(s),ma&&ma.d(),fa&&fa.d(),ua=!1,g(ia)}}}function w(a,{exit:e,authUrl:s}){return{exitUrl:e,authUrl:s}}function S(a,e,s){let{exitUrl:t}=e,{authUrl:r}=e,l=!1,c="",o="",n="",p="",h="",u="";return a.$$set=a=>{"exitUrl"in a&&s(7,t=a.exitUrl),"authUrl"in a&&s(8,r=a.authUrl)},[l,c,o,n,p,u,async function(){s(0,l=!0);let a={username:c,password:o};h&&Object.assign(a,{captcha_sid:h,captcha_key:u}),fetch(r,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((a=>a.json())).then((a=>{switch(a.status){case V:s(4,p=a.img),h=a.sid;break;case A:s(3,n="Указан неверный логин или пароль.");break;case x:y("/otp");break;case k:window.location.assign(t);break;case U:s(3,n="Слишком много попыток входа. Повторите попытку позднее.");break;case I:default:s(3,n="Произошла неизвестная ошибка")}})).catch((a=>s(3,n="Произошла сетевая ошибка"))).then((()=>s(0,l=!1)))},t,r,function(){c=this.value,s(1,c)},a=>localStorage.setItem("username",a.target.value),function(){o=this.value,s(2,o)},a=>localStorage.setItem("password",a.target.value),function(){u=this.value,s(5,u)}]}export default class extends a{constructor(a){super(),e(this,a,S,j,s,{exitUrl:7,authUrl:8})}}export{w as preload};
